<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="GitHub Gist Viewer" 
  	author="Brandon Donnelson" 
  	author_email="branflake2267@gmail.com" 
  	title_url="http://c.dart-examples.com"
  	description="Display your Github gist."/>
  	<UserPref name="gistId" display_name="Gist Id" default_value=""/>
  	<UserPref name="https" display_name="HTTPS" datatype="bool" default_value="false"/>
  <Content type="html">
    <![CDATA[
      <div align="center">
        <script type="text/javascript">
        
          var http = "http";
          if (prefs.getBool("https")) {
            http = "https";
          }
          String url = http + '://gist.github.com/' + prefs.getString('gistId') + '.js';

		  function getGist() {    
		    var params = {};  
		    params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.TEXT;  
		    gadgets.io.makeRequest(url, response, params);
		  };
		  
		  function response(obj) {  
		    var str = obj.text;
		    document.write(str);
		  };
		  gadgets.util.registerOnLoadHandler(getHtml);
         
          getGist();
         
        </script>
	  </div>
    ]]>
  </Content>
</Module>